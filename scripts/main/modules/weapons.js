/* Copyright 2025 <FireWave Interactive>. This work is licensed under the Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License. You may not use this work for commercial purposes, and you may not alter, transform, or build upon this work. For more details, visit http://creativecommons.org/licenses/by-nc-nd/4.0/ */
const _0x598c4d=_0x2aa6;function _0x2aa6(_0x2f293d,_0x285ee8){_0x2f293d=_0x2f293d-(0x20ac+-0x11c7+-0xe18);const _0x2aa6a0=_0x285e();let _0x112fc4=_0x2aa6a0[_0x2f293d];return _0x112fc4;}(function(_0x1706a0,_0x136980){const _0x2f3493=_0x2aa6,_0x31b0eb=_0x1706a0();while(!![]){try{const _0x5f6e1a=-parseInt(_0x2f3493(0x139))/(0x63e*0x4+0x19cf+0x43*-0xc2)*(-parseInt(_0x2f3493(0x140))/(-0x6c1+0x1339+-0xc76))+-parseInt(_0x2f3493(0xff))/(0x1*0xc95+0x4*-0xd2+-0x94a)*(-parseInt(_0x2f3493(0x137))/(-0x16a0+-0xbb*0x8+0x1c7c))+-parseInt(_0x2f3493(0x134))/(0x1*-0x6e6+0x2593+-0x1ea8)*(parseInt(_0x2f3493(0x132))/(-0x15*0x199+-0x919+-0x2*-0x1556))+-parseInt(_0x2f3493(0x133))/(0x4b*-0x1+0x11*0xe3+-0x3*0x4eb)*(parseInt(_0x2f3493(0x10f))/(-0x2310+-0x21dd+-0x44f5*-0x1))+parseInt(_0x2f3493(0xd0))/(0xdf*0x8+-0x936*-0x1+0x1025*-0x1)+parseInt(_0x2f3493(0xeb))/(-0x557+-0xca9+-0x905*-0x2)+-parseInt(_0x2f3493(0x111))/(0x8a5*0x1+0x7*-0x487+0x1717);if(_0x5f6e1a===_0x136980)break;else _0x31b0eb['push'](_0x31b0eb['shift']());}catch(_0x548999){_0x31b0eb['push'](_0x31b0eb['shift']());}}}(_0x285e,0x9ba87+-0xb587+-0x420ad*0x1));const _0x23a63a=(function(){let _0x22198f=!![];return function(_0x59299e,_0x2dfab2){const _0x13cd29=_0x22198f?function(){const _0x2d9111=_0x2aa6;if(_0x2dfab2){const _0x19abd8=_0x2dfab2[_0x2d9111(0xce)](_0x59299e,arguments);return _0x2dfab2=null,_0x19abd8;}}:function(){};return _0x22198f=![],_0x13cd29;};}()),_0x224fe6=_0x23a63a(this,function(){const _0x1f7be0=_0x2aa6;let _0x4067bd;try{const _0x32d707=Function('retur'+_0x1f7be0(0xcd)+'nctio'+_0x1f7be0(0x104)+(_0x1f7be0(0xf0)+_0x1f7be0(0x135)+'ctor('+_0x1f7be0(0xf5)+_0x1f7be0(0xe6)+'is\x22)('+'\x20)')+');');_0x4067bd=_0x32d707();}catch(_0x4929df){_0x4067bd=window;}const _0x473390=_0x4067bd[_0x1f7be0(0x12a)+'le']=_0x4067bd[_0x1f7be0(0x12a)+'le']||{},_0x604abb=[_0x1f7be0(0xe9),_0x1f7be0(0x11e),'info',_0x1f7be0(0xfd),'excep'+_0x1f7be0(0x11c),_0x1f7be0(0xe5),'trace'];for(let _0x4aab59=-0x22d+-0x12ca+0x14f7*0x1;_0x4aab59<_0x604abb[_0x1f7be0(0x107)+'h'];_0x4aab59++){const _0x47c1b4=_0x23a63a[_0x1f7be0(0x130)+_0x1f7be0(0xd2)+'r'][_0x1f7be0(0x126)+_0x1f7be0(0x10d)][_0x1f7be0(0x123)](_0x23a63a),_0x114e69=_0x604abb[_0x4aab59],_0x373284=_0x473390[_0x114e69]||_0x47c1b4;_0x47c1b4[_0x1f7be0(0x112)+_0x1f7be0(0x12d)]=_0x23a63a[_0x1f7be0(0x123)](_0x23a63a),_0x47c1b4[_0x1f7be0(0xed)+_0x1f7be0(0x114)]=_0x373284['toStr'+_0x1f7be0(0x114)][_0x1f7be0(0x123)](_0x373284),_0x473390[_0x114e69]=_0x47c1b4;}});_0x224fe6();import{EntityComponentTypes,EquipmentSlot,world}from'@minecraft/server';import{isSettingEnabled}from'main/util/settings';import _0x2419a5 from'./scripting';const ATTACHMENT_PROPERTY_PREFIX=_0x598c4d(0x128)+'ankai'+':',ATTACHMENT_KEYS=['sight',_0x598c4d(0xda),_0x598c4d(0xfa)+_0x598c4d(0xfc),'grip'],WEAPON_FIRE_PROPERTY=ATTACHMENT_PROPERTY_PREFIX+(_0x598c4d(0xf2)+_0x598c4d(0x11d)+'e'),WALL_DETECTION_OPTIONS={'maxDistance':0x1,'includeLiquidBlocks':![],'includePassableBlocks':![]};export default class WeaponModule extends _0x2419a5{[_0x598c4d(0xd7)+_0x598c4d(0xe2)+'_SYNC'+_0x598c4d(0x136)+_0x598c4d(0x125)]=0x47*0x35+-0x2653*-0x1+-0x3503;[_0x598c4d(0x129)+_0x598c4d(0x13b)+_0x598c4d(0x10c)+_0x598c4d(0x122)+_0x598c4d(0xd3)]=0x1*-0x665+0x1b*-0xe7+-0x3*-0xa41;constructor(_0x2d4f3d=_0x598c4d(0xef)+'n',_0x130cca=!![]){super(_0x2d4f3d,_0x130cca);}[_0x598c4d(0x115)+'tiali'+'ze'](){const _0x447434=_0x598c4d;this[_0x447434(0x121)+'Attac'+_0x447434(0x12e)+_0x447434(0xd8)+_0x447434(0xe8)+'ation'](),this['setup'+_0x447434(0x131)+_0x447434(0x13a)+_0x447434(0xdc)](),this[_0x447434(0xf7)](_0x447434(0xef)+_0x447434(0x10a)+_0x447434(0x116)+_0x447434(0x10e)+_0x447434(0x109)+_0x447434(0xfb)+'zed.');}[_0x598c4d(0x121)+_0x598c4d(0x141)+'hment'+_0x598c4d(0xd8)+_0x598c4d(0xe8)+'ation'](){const _0x2cb060=_0x598c4d;this[_0x2cb060(0xdd)+_0x2cb060(0x13f)+_0x2cb060(0x12b)](this['ATTAC'+_0x2cb060(0xe2)+_0x2cb060(0xf8)+_0x2cb060(0x136)+'RVAL'],this[_0x2cb060(0xee)+'eWeap'+_0x2cb060(0xe4)+'ates']['bind'](this));}['setup'+_0x598c4d(0x131)+_0x598c4d(0x13a)+_0x598c4d(0xdc)](){const _0x43f294=_0x598c4d;this[_0x43f294(0xdd)+'ckInt'+_0x43f294(0x12b)](this['FIRE_'+_0x43f294(0x13b)+_0x43f294(0x10c)+_0x43f294(0x122)+'ERVAL'],this[_0x43f294(0x138)+_0x43f294(0xef)+'nFire'+'State'][_0x43f294(0x123)](this));}['handl'+'eWeap'+_0x598c4d(0xe4)+_0x598c4d(0xd9)](){const _0x9729ee=_0x598c4d;for(const _0x54984a of world['getPl'+_0x9729ee(0x108)]()){this['proce'+_0x9729ee(0xe3)+'yerWe'+_0x9729ee(0xec)](_0x54984a);}}[_0x598c4d(0x138)+_0x598c4d(0xef)+'nFire'+'State'](){const _0x54277e=_0x598c4d;for(const _0x169f02 of world[_0x54277e(0x106)+_0x54277e(0x108)]()){const _0x1e1073=_0x169f02['getPr'+_0x54277e(0x124)+'y'](WEAPON_FIRE_PROPERTY);_0x1e1073===0x1*-0xc09+0x15d5+0x6d*-0x17&&_0x169f02[_0x54277e(0xdb)+_0x54277e(0x124)+'y'](WEAPON_FIRE_PROPERTY,0xe79+-0x4*-0x76c+0x1*-0x2c29);}}[_0x598c4d(0x11f)+_0x598c4d(0xe3)+_0x598c4d(0xf3)+_0x598c4d(0xec)](_0xcedb36){const _0x278b30=_0x598c4d,_0x508c77=_0xcedb36[_0x278b30(0xf4)+_0x278b30(0xea)+'nt'](EntityComponentTypes[_0x278b30(0x105)+_0x278b30(0x13c)]);if(!_0x508c77)return;const _0x1809b4=_0x508c77['getEq'+_0x278b30(0xcf)+'nt'](EquipmentSlot['Mainh'+'and']);if(!_0x1809b4||!_0x1809b4[_0x278b30(0xd6)+'gs']()[_0x278b30(0xe0)+'des'](_0x278b30(0x13d)+_0x278b30(0xec))){this[_0x278b30(0x138)+'Attac'+_0x278b30(0x12e)+'s'](_0xcedb36);return;}this[_0x278b30(0x110)+'WallP'+_0x278b30(0xe7)+_0x278b30(0x120)](_0xcedb36),_0x1809b4[_0x278b30(0xd6)+'gs']()[_0x278b30(0xe0)+_0x278b30(0x117)](_0x278b30(0x12f)+'_atta'+'chmen'+'t')?this['syncA'+_0x278b30(0x10b)+_0x278b30(0xd5)](_0xcedb36,_0x1809b4):this[_0x278b30(0x138)+_0x278b30(0x141)+'hment'+'s'](_0xcedb36);}['check'+_0x598c4d(0xf1)+_0x598c4d(0xe7)+'ity'](_0x2cb605){const _0xd8c322=_0x598c4d;if(!isSettingEnabled(_0xd8c322(0x11a)+_0xd8c322(0xdf)+_0xd8c322(0x11c)))return;const _0x110d4b=_0x2cb605[_0xd8c322(0x13e)+'ockFr'+'omVie'+_0xd8c322(0xfe)+_0xd8c322(0x12c)](WALL_DETECTION_OPTIONS);_0x2cb605['trigg'+_0xd8c322(0xde)+'nt'](_0x110d4b?ATTACHMENT_PROPERTY_PREFIX+(_0xd8c322(0xf9)+'all_d'+_0xd8c322(0x118)):ATTACHMENT_PROPERTY_PREFIX+('remov'+_0xd8c322(0x11b)+_0xd8c322(0x101)+_0xd8c322(0x113)));}[_0x598c4d(0x119)+_0x598c4d(0x10b)+_0x598c4d(0xd5)](_0x368759,_0x33b841){const _0x3aae1e=_0x598c4d,_0x44af42=_0xc96a3d=>_0x33b841[_0x3aae1e(0xf6)+_0x3aae1e(0x100)+'Prope'+'rty'](''+ATTACHMENT_PROPERTY_PREFIX+_0xc96a3d)||-0x23e3+-0x1752+0x3b35;for(const _0xbd28f of ATTACHMENT_KEYS){const _0x44f8fa=_0x44af42(_0xbd28f),_0x2ed578=''+ATTACHMENT_PROPERTY_PREFIX+_0xbd28f;_0x368759[_0x3aae1e(0xdb)+'opert'+'y'](_0x2ed578,_0x44f8fa),_0xbd28f===_0x3aae1e(0xfa)+'cer'&&this[_0x3aae1e(0xe1)+'eTag'](_0x368759,_0x3aae1e(0xfa)+_0x3aae1e(0xfc),_0x44f8fa===0x2070+0x26f3*-0x1+0x684),_0xbd28f==='grip'&&this['manag'+_0x3aae1e(0x102)](_0x368759,'foreg'+_0x3aae1e(0xd1),_0x44f8fa===-0x2364+0x19aa+0x9bb);}}['manag'+_0x598c4d(0x102)](_0x2c4b06,_0x33b53f,_0x17c7f9){const _0x1d7a9c=_0x598c4d;if(_0x17c7f9){if(!_0x2c4b06[_0x1d7a9c(0xd4)+'g'](_0x33b53f))_0x2c4b06[_0x1d7a9c(0x127)+'g'](_0x33b53f);}else{if(_0x2c4b06[_0x1d7a9c(0xd4)+'g'](_0x33b53f))_0x2c4b06[_0x1d7a9c(0x103)+_0x1d7a9c(0x102)](_0x33b53f);}}['reset'+_0x598c4d(0x141)+_0x598c4d(0x12e)+'s'](_0x3ac841){const _0x262456=_0x598c4d;for(const _0x3e67f3 of ATTACHMENT_KEYS){_0x3ac841[_0x262456(0xdb)+_0x262456(0x124)+'y'](''+ATTACHMENT_PROPERTY_PREFIX+_0x3e67f3,-0xeeb+-0x2304+-0x3*-0x10a5);}}}function _0x285e(){const _0x3194fc=['28yWklBg','5adFBmJ','nstru','_INTE','556OZAYqW','reset','2371uCKZTf','tateR','STATE','pable','is_we','getBl','ckInt','284iVfCBK','Attac','n\x20(fu','apply','uipme','4884876qmmxWZ','rip','ructo','ERVAL','hasTa','ments','getTa','ATTAC','Synch','ates','laser','setPr','eset','addTi','erEve','detec','inclu','manag','HMENT','ssPla','onUpd','table','rn\x20th','roxim','roniz','log','mpone','1879220aIimEP','apon','toStr','handl','Weapo','{}.co','WallP','weapo','yerWe','getCo','\x22retu','getDy','info','_SYNC','add_w','silen','tiali','cer','error','wDire','2595EqzdRh','namic','l_det','eTag','remov','n()\x20','Equip','getPl','lengt','ayers','s\x20ini','n\x20mod','ttach','_RESE','type','ystem','192368cpyOce','check','3754762KCdlVi','__pro','ect','ing','onIni','ule\x20s','des','etect','syncA','wall_','e_wal','tion','n_fir','warn','proce','ity','setup','T_INT','bind','opert','RVAL','proto','addTa','trenb','FIRE_','conso','erval','ction','to__','hment','allow','const','FireS','2576892kyiSOB'];_0x285e=function(){return _0x3194fc;};return _0x285e();}